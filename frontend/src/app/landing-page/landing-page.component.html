<div class="relative min-h-screen bg-gradient-to-r from-purple-300 to-pink-300">

  <div *ngIf="!showQuestionCard" class = "min-h-screen flex flex-col">
  <header class="flex justify-end items-center p-6 gap-4">
    <!--NA RAZIE BRAK LOGIKI LOGOWANIA WIƒòC TE≈ª BRAK PROFILU U≈ªYTKOWNIKA-->
    <!--<button (click)="openProfile()" class="cursor-pointer h-10 w-10 border-2 border-white shadow-sm hover:shadow-md transition-shadow rounded-full bg-purple-200 text-purple-700 flex items-center justify-center">
      <span>üë§</span>
    </button>-->
    
    <button (click)="openSettings()" class="cursor-pointer h-10 w-10 border-2 border-white shadow-sm hover:shadow-md transition-shadow rounded-full bg-purple-200 text-purple-700 flex items-center justify-center">
      <span class="text-xl">‚öôÔ∏è</span>
    </button>
  </header>

  <main class="flex flex-col items-center justify-center px-6" [style.min-height]="'calc(100vh - 88px)'">

    <div class="text-center space-y-8 max-w-md w-full">
      <h1 class="fancy-title text-purple-900/80 mb-8 text-5xl md:text-6xl lg:text-7xl">Risky Physics</h1>
      
      <div class="bg-white/70 backdrop-blur-sm rounded-3xl p-8 shadow-lg border-2 border-white">
        <h3 class="text-purple-900 mb-6"> {{languageService.t().chooseCategory}} </h3>
        
        
<div class="space-y-4">
  <button
    *ngFor="let category of categories; let isLast = last; let isFirst = first; let idx = index"
    type="button"
    [id]="'category-btn-' + idx"

    (click)="selectedCategory = category.id"
    (focus)="selectedCategory = category.id"
    (keydown)="handleCategoryTab($event, idx)"
    
    [class.ring-2]="selectedCategory === category.id"
    [class.ring-purple-600]="selectedCategory === category.id"
    [class.bg-purple-100]="selectedCategory === category.id"
    
    class="w-full flex items-center space-x-3 p-3 rounded-lg border border-purple-300 hover:bg-purple-50 focus:outline-none transition-all text-left"
  >
    <div 
      class="w-5 h-5 rounded-full border border-purple-600 flex items-center justify-center"
      [class.bg-white]="selectedCategory !== category.id"
    >
      <div *ngIf="selectedCategory === category.id" class="w-3 h-3 rounded-full bg-purple-600"></div>
    </div>

    <span class="text-purple-900 font-medium flex-1">
      {{ category.name }}
    </span>
  </button>
</div>
      
      </div>

      <button 
        size="lg"
        (click)="startGame()"
        class="bg-gradient-to-r from-purple-300 to-pink-300 hover:from-purple-400 hover:to-pink-400 text-purple-900 shadow-lg hover:shadow-xl transition-all px-12 py-6 rounded-full"
      >
        {{languageService.t().startGame}}
      </button>
    </div>
  </main>


<!--<div *ngIf="isProfileOpen">
  <div (click)="isProfileOpen = false" class="sheet-overlay"></div>
  <div class="sheet-content">
    <h3 class="text-purple-900 text-lg font-semibold">Profile</h3>
    
    <app-user-profile></app-user-profile>

    <button (click)="isProfileOpen = false" 
    class="
    w-full
    flex items-center justify-center
    py-2 px-3
    bg-white
    text-purple-700
    font-semibold
    border border-gray-200
    rounded-lg
    shadow-sm
    cursor-pointer
    transition-all
    hover:bg-purple-50
    hover:border-purple-300
  "> Close</button>
  </div>
 </div>-->


<div *ngIf="isSettingsOpen">
  <div (click)="isSettingsOpen = false" class="sheet-overlay"></div>
  <div class="sheet-content">
    <h3 class="text-purple-900 text-lg font-semibold">{{languageService.t().settings}}</h3>
    
    <app-settings (close)="isSettingsOpen = false"></app-settings>
    
  </div>
 </div>
</div>

<div *ngIf="showQuestionCard && currentQuestion" class="absolute inset-0 z-10 bg-white">
  <app-question-card 
  [question]="currentQuestion!"
  [currentQuestionIndex] = "currentQuestionIndex + 1"
  [totalQuestions] = "questionsList.length"
  [selectedCategory] = "getCategoryName(selectedCategory)"
  (back)="backToMenu()"
  (next) = "showAnswer()">
</app-question-card>
</div>

<div *ngIf="showAnswerCard" class="absolute inset-0 z-10 bg-white">
  <app-question-answer-card
    [question]="currentQuestion!"
    [currentQuestionIndex] = "currentQuestionIndex + 1"
    [selectedCategory] = "getCategoryName(selectedCategory)"
    (back)="backToMenu()"
    (next) = "handleNextQuestion()"
  ></app-question-answer-card>
</div>

<div *ngIf="showGameSummary" class="absolute inset-0 z-10 bg-white">
  <app-game-summary
    [questions] = "questionsList"
    (back)="exitGame()"
    (playAgain) = "showGameSummary = false">
  </app-game-summary>
</div>

<app-loading-screen 
    *ngIf="isLoading" 
    (cancel)="cancelLoading()">
</app-loading-screen>

<app-confirmation-pop-up
    *ngIf="showExitConfirmation"
    (confirm)="exitGame()"
    (cancel)="cancelExit()">
</app-confirmation-pop-up>

<div *ngIf="showError" class="fixed inset-0 z-[10000] flex items-center justify-center bg-white/30 backdrop-blur-sm">
  <div class="bg-white/90 p-8 rounded-3xl shadow-xl border-2 border-white max-w-sm w-full text-center mx-4">
    
    <div class="text-5xl mb-4">‚ö†Ô∏è</div>
    
    <h3 class="text-purple-900 text-xl font-bold mb-2">
      {{ languageService.t().sthWentWrong }}
    </h3>
    
    <p class="text-purple-800 mb-6 leading-relaxed">
      {{ errorMessage }}
    </p>
    
    <button 
      (click)="closeErrorModal()"
      class="bg-gradient-to-r from-purple-400 to-pink-400 text-white font-bold py-2 px-6 rounded-full shadow-md hover:shadow-lg transform hover:-translate-y-0.5 transition-all"
    >
      OK
    </button>
  </div>
</div>

</div>